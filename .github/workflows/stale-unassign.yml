##############################################################################
##############################################################################
#
# NOTE!
#
# Please read the README.md file in this directory that defines what should
# be placed in this file
#
##############################################################################
##############################################################################

name: Auto-unassign Stale Issues

on:
  push:
    branches:
      - feature-stale-issue-unassign
  workflow_dispatch:
    # Manual trigger for testing
    inputs:
      grace-period-minutes:
        description: 'Grace period in minutes before unassignment'
        required: false
        default: '2'
      dry-run:
        description: 'Run in dry-run mode (true/false)'
        required: false
        default: 'true'

permissions:
  issues: write
  contents: read
  pull-requests: read

jobs:
  unassign-stale:
    name: Unassign Stale Issues
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run stale unassign action
        uses: ./.github/actions/stale-unassign
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          grace-period-minutes: ${{ github.event.inputs.grace-period-minutes || '2' }}
          dry-run: ${{ github.event.inputs.dry-run || 'true' }}
          stale-label: 'no-issue-activity-test'
          # Uncomment to customize the comment message:
          # comment-message: |
          #   Hi @{assignee}, this issue has been unassigned due to inactivity.
          #   Feel free to reassign yourself if you plan to continue.
